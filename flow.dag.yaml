$schema: https://azuremlschemas.azureedge.net/promptflow/latest/Flow.schema.json
inputs:
  source_file:
    type: string
    default: faqs.txt
outputs: 
  embeddings:
    type: list
    reference: ${create_embeddings.output}
nodes:
- name: embeddings_count
  type: python
  source:
    type: code
    path: embeddings_count.py
- name: chunk_text
  type: python
  activate:
    when: ${embeddings_count.output}
    is: 0
  source:
    type: code
    path: chunk_text.py
  inputs:
    source_file: ${inputs.source_file}
- name: create_embeddings
  type: python
  source:
    type: code
    path: create_embeddings.py
  inputs:
    chunks: ${chunk_text.output}
